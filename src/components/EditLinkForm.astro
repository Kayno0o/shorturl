---
import { Save } from '@lucide/astro'
import Button from './Button.astro'
import Card from './Card.astro'
import Input from './Input.astro'

export interface Props {
  code: string
  value: string
  originalCode: string
}

const { code, value, originalCode } = Astro.props
---

<Card class="p-6">
  <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6">
    Edit Link
  </h2>

  <form action={`/api/l/update/${originalCode}`} method="post" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <Input
        label="Short Code"
        name="code"
        value={code}
        placeholder="my-custom-link"
        help="Leave empty to auto-generate from URL"
      />
      <Input
        label="Target URL"
        type="url"
        name="value"
        value={value}
        required
        placeholder="https://example.com"
      />
    </div>

    <div class="flex gap-4">
      <Button type="submit">
        <Save size={16} />
        Save Changes
      </Button>
      <a href="/">
        <Button variant="secondary">
          Cancel
        </Button>
      </a>
    </div>
  </form>
</Card>
